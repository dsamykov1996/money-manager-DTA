# —Ñ—É–Ω–∫—Ü—ñ—è –¥–æ–¥–∞—î –Ω–æ–≤–∏–π —Ç–æ–≤–∞—Ä –¥–æ —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫
def add_item(shopping_list):
    name = input("–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É: ")         # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É
    quantity = int(input("–í–≤–µ–¥—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å: "))    # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å (–ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ —á–∏—Å–ª–æ)
    price = float(input("–í–≤–µ–¥—ñ—Ç—å —Ü—ñ–Ω—É –∑–∞ –æ–¥–∏–Ω–∏—Ü—é: "))  # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å —Ü—ñ–Ω—É (–ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ —á–∏—Å–ª–æ –∑ –∫–æ–º–æ—é)
    
    # —Å—Ç–≤–æ—Ä—é—î–º–æ —Å–ª–æ–≤–Ω–∏–∫ –∑ –¥–∞–Ω–∏–º–∏ –ø—Ä–æ —Ç–æ–≤–∞—Ä
    item = {
        "name": name,
        "quantity": quantity,
        "price": price
    }
    
    # –¥–æ–¥–∞—î–º–æ —Ç–æ–≤–∞—Ä –¥–æ —Å–ø–∏—Å–∫—É
    shopping_list.append(item)
    
    print(f"‚úÖ {name} –¥–æ–¥–∞–Ω–æ –¥–æ —Å–ø–∏—Å–∫—É!")  # –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è


# —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–∫–∞–∑—É—î —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
def show_list(shopping_list):
    # —è–∫—â–æ —Å–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ –≤–∏—Ö—ñ–¥ –∑ —Ñ—É–Ω–∫—Ü—ñ—ó
    if not shopping_list:
        print("\nList is empty")
        return
    
    # –≤–∏–≤–æ–¥–∏–º–æ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ –ø–æ —á–µ—Ä–∑—ñ
    print("\nYour list: ")
    for i, item in enumerate(shopping_list, start=1):
        print(f'{i}. {item["name"]} - {item["quantity"]} x {item["price"]}‚Ç¨')


# —Ñ—É–Ω–∫—Ü—ñ—è —Ä–∞—Ö—É—î –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É –ø–æ–∫—É–ø–æ–∫
def count_total(shopping_list):
    total = 0  # –∑–º—ñ–Ω–Ω–∞ –¥–ª—è –ø—ñ–¥—Å—É–º–∫—É
    for item in shopping_list:
        total += item["quantity"] * item["price"]  # –¥–æ–¥–∞—î–º–æ –≤–∞—Ä—Ç—ñ—Å—Ç—å –∫–æ–∂–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É
    print(f"Total price: {total:.2f}‚Ç¨")  # –≤–∏–≤–æ–¥–∏–º–æ —Å—É–º—É –∑ 2 –∑–Ω–∞–∫–∞–º–∏ –ø—ñ—Å–ª—è –∫–æ–º–∏


# —Ñ—É–Ω–∫—Ü—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î —Å–ø–∏—Å–æ–∫ —É —Ñ–∞–π–ª
def save_to_file(shopping_list):
    # "w" ‚Äî –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î —Ñ–∞–π–ª (—Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π, —è–∫—â–æ –Ω–µ–º–∞—î)
    with open("text.txt", "w", encoding="utf-8") as f:
        for i, item in enumerate(shopping_list, start=1):
            # –∑–∞–ø–∏—Å—É—î–º–æ –∫–æ–∂–µ–Ω —Ç–æ–≤–∞—Ä —É –≤–∏–≥–ª—è–¥—ñ —Ä—è–¥–∫–∞
            f.write(f'{i}. {item["name"]} - {item["quantity"]} x {item["price"]}‚Ç¨\n')
    print("‚úÖ Shopping list saved to text.txt")  # –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—Ö


# —Ñ—É–Ω–∫—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Å–ø–∏—Å–æ–∫ –∑ —Ñ–∞–π–ª—É
def load_from_file():
    shopping_list = []  # —Å—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫
    try:
        # "r" ‚Äî –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Ñ–∞–π–ª –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è
        with open("text.txt", "r", encoding="utf-8") as f:
            for line in f:
                # –ø—Ä–∏–∫–ª–∞–¥ —Ä—è–¥–∫–∞: "1. –•–ª—ñ–± - 2 x 25.0‚Ç¨"
                parts = line.strip().split()  # —Ä–æ–∑–¥—ñ–ª—è—î–º–æ —Ä—è–¥–æ–∫ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏
                name = parts[1]               # –¥—Ä—É–≥–∞ —á–∞—Å—Ç–∏–Ω–∞ ‚Äî –Ω–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É
                quantity = int(parts[3])      # —á–µ—Ç–≤–µ—Ä—Ç–∞ ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å
                price = float(parts[5][:-1])  # —à–æ—Å—Ç–∞ ‚Äî —Ü—ñ–Ω–∞ (–±–µ–∑ —Å–∏–º–≤–æ–ª—É ‚Ç¨)
                
                # —Å—Ç–≤–æ—Ä—é—î–º–æ —Å–ª–æ–≤–Ω–∏–∫ –∑ —Ç–æ–≤–∞—Ä–æ–º
                item = {
                    "name": name,
                    "quantity": quantity,
                    "price": price
                }
                # –¥–æ–¥–∞—î–º–æ –π–æ–≥–æ –¥–æ —Å–ø–∏—Å–∫—É
                shopping_list.append(item)
        print("‚úÖ Shopping list loaded from text.txt")
    except FileNotFoundError:
        # —è–∫—â–æ —Ñ–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø–æ–ø–µ—Ä–µ–¥–∂–∞—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        print("‚ùå File not found! Create a new list instead.")
    return shopping_list  # –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫



# –≥–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–æ–≥—Ä–∞–º–∏
def main():
    print("üõí –í—ñ—Ç–∞—é —É –º–µ–Ω–µ–¥–∂–µ—Ä—ñ –ø–æ–∫—É–ø–æ–∫!")
    shopping_list = []  # —Å—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫
    
    while True:  # –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Ü–∏–∫–ª –º–µ–Ω—é
        print('''
–ú–µ–Ω—é:
1. –î–æ–¥–∞—Ç–∏ –ø–æ–∫—É–ø–∫—É
2. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫
3. –ü–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É
4. –ó–±–µ—Ä–µ–≥—Ç–∏ —É —Ñ–∞–π–ª
5. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ —Ñ–∞–π–ª—É
6. –í–∏—Ö—ñ–¥
            ''')
        try:
            # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–±–∏—Ä–∞—î –ø—É–Ω–∫—Ç –º–µ–Ω—é
            choice = int(input("–í–∞—à –≤–∏–±—ñ—Ä: "))

            # –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è match-case (—è–∫ switch –≤ —ñ–Ω—à–∏—Ö –º–æ–≤–∞—Ö)
            match choice:
                case 1:
                    try:
                        add_item(shopping_list)  # –¥–æ–¥–∞—î–º–æ –ø–æ–∫—É–ø–∫—É
                    except:
                        print("Error!")
                case 2:
                    show_list(shopping_list)     # –ø–æ–∫–∞–∑—É—î–º–æ —Å–ø–∏—Å–æ–∫
                case 3:
                    count_total(shopping_list)   # —Ä–∞—Ö—É—î–º–æ —Å—É–º—É
                case 4:
                    save_to_file(shopping_list)  # –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —É —Ñ–∞–π–ª
                case 5:
                    shopping_list = load_from_file()  # –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∑ —Ñ–∞–π–ª—É
                case 6:
                    print("See you!!")           # –≤–∏—Ö—ñ–¥ –∑ –ø—Ä–æ–≥—Ä–∞–º–∏
                    break
                case _:
                    print("Error! Enter number 1-6!")  # —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —á–∏—Å–ª–æ
                    
        except ValueError:
            # —è–∫—â–æ –≤–≤–µ–¥–µ–Ω–æ –Ω–µ —á–∏—Å–ª–æ
            print("Enter number 1-6!!")


# –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ–± –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞–≤—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —Ñ–∞–π–ª –≤–∏–∫–æ–Ω—É—é—Ç—å –Ω–∞–ø—Ä—è–º—É
if __name__ == "__main__":            
    main()