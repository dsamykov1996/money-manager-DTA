# -------------------------------
# üõí –ü–†–û–ì–†–ê–ú–ê: –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–∫—É–ø–æ–∫
# –ê–≤—Ç–æ—Ä: –î–∏–º–∞ üòâ
# –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –¥–æ–∑–≤–æ–ª—è—î –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏ –¥–æ —Å–ø–∏—Å–∫—É, –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –π–æ–≥–æ,
# —Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É, –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —É —Ñ–∞–π–ª —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –Ω–∞–∑–∞–¥
# -------------------------------


# üß© –§–£–ù–ö–¶–Ü–Ø: –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä—É
def add_item(shopping_list):
    # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "–•–ª—ñ–±")
    name = input("–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É: ")
    
    # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å, –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ —ó—ó –∑ —Ç–µ–∫—Å—Ç—É –Ω–∞ —á–∏—Å–ª–æ
    quantity = int(input("–í–≤–µ–¥—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å: "))
    
    # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å —Ü—ñ–Ω—É –∑–∞ –æ–¥–∏–Ω–∏—Ü—é, –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –Ω–∞ —á–∏—Å–ª–æ –∑ –∫–æ–º–æ—é (float)
    price = float(input("–í–≤–µ–¥—ñ—Ç—å —Ü—ñ–Ω—É –∑–∞ –æ–¥–∏–Ω–∏—Ü—é: "))
    
    # —Å—Ç–≤–æ—Ä—é—î–º–æ —Å–ª–æ–≤–Ω–∏–∫ (dict) ‚Äî —Ü–µ —è–∫ "–æ–¥–∏–Ω —Ç–æ–≤–∞—Ä" –∑ —É—Å—ñ–º–∞ –π–æ–≥–æ –¥–∞–Ω–∏–º–∏
    item = {
        "name": name,        # –Ω–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É
        "quantity": quantity,  # –∫—ñ–ª—å–∫—ñ—Å—Ç—å
        "price": price         # —Ü—ñ–Ω–∞ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é
    }
    
    # –¥–æ–¥–∞—î–º–æ —Ü–µ–π —Å–ª–æ–≤–Ω–∏–∫ –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫
    shopping_list.append(item)
    
    # –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è
    print(f"‚úÖ {name} –¥–æ–¥–∞–Ω–æ –¥–æ —Å–ø–∏—Å–∫—É!")  


# üßæ –§–£–ù–ö–¶–Ü–Ø: –ø–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
def show_list(shopping_list):
    # —è–∫—â–æ —Å–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª—è—î–º–æ —ñ –≤–∏—Ö–æ–¥–∏–º–æ –∑ —Ñ—É–Ω–∫—Ü—ñ—ó
    if not shopping_list:
        print("\nList is empty")
        return
    
    # —è–∫—â–æ —Å–ø–∏—Å–æ–∫ –Ω–µ –ø–æ—Ä–æ–∂–Ω—ñ–π ‚Äî –≤–∏–≤–æ–¥–∏–º–æ –π–æ–≥–æ –∫—Ä–∞—Å–∏–≤–æ
    print("\nYour list: ")
    
    # enumerate –ø–æ–≤–µ—Ä—Ç–∞—î (–Ω–æ–º–µ—Ä, –µ–ª–µ–º–µ–Ω—Ç), —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –Ω—É–º–µ—Ä—É–≤–∞—Ç–∏ –ø—É–Ω–∫—Ç–∏
    for i, item in enumerate(shopping_list, start=1):
        # item ‚Äî —Ü–µ —Å–ª–æ–≤–Ω–∏–∫ {"name": "...", "quantity": ..., "price": ...}
        print(f'{i}. {item["name"]} - {item["quantity"]} x {item["price"]}‚Ç¨')


# üí∞ –§–£–ù–ö–¶–Ü–Ø: –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î –∑–∞–≥–∞–ª—å–Ω—É –≤–∞—Ä—Ç—ñ—Å—Ç—å —É—Å—ñ—Ö –ø–æ–∫—É–ø–æ–∫
def count_total(shopping_list):
    total = 0  # –ø–æ—á–∞—Ç–∫–æ–≤–∞ —Å—É–º–∞ = 0
    
    # –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—è –ø–æ –∫–æ–∂–Ω–æ–º—É —Ç–æ–≤–∞—Ä—É –≤ —Å–ø–∏—Å–∫—É
    for item in shopping_list:
        # –¥–æ–¥–∞—î–º–æ –¥–æ total (–∫—ñ–ª—å–∫—ñ—Å—Ç—å √ó —Ü—ñ–Ω–∞)
        total += item["quantity"] * item["price"]
    
    # –≤–∏–≤–æ–¥–∏–º–æ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É –∑ –¥–≤–æ–º–∞ —Ü–∏—Ñ—Ä–∞–º–∏ –ø—ñ—Å–ª—è –∫–æ–º–∏
    print(f"Total price: {total:.2f}‚Ç¨")  


# üíæ –§–£–ù–ö–¶–Ü–Ø: –∑–±–µ—Ä—ñ–≥–∞—î —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ —É —Ñ–∞–π–ª text.txt
def save_to_file(shopping_list):
    # –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ (–∞–±–æ —Å—Ç–≤–æ—Ä—é—î–º–æ) —Ñ–∞–π–ª —É —Ä–µ–∂–∏–º—ñ –∑–∞–ø–∏—Å—É ("w")
    # encoding="utf-8" ‚Äî —â–æ–± –ø—Ä–∞—Ü—é–≤–∞–ª–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –ª—ñ—Ç–µ—Ä–∏
    with open("text.txt", "w", encoding="utf-8") as f:
        # –ø–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏ —Ç–∞ –∑–∞–ø–∏—Å—É—î–º–æ –∫–æ–∂–µ–Ω —É –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫
        for i, item in enumerate(shopping_list, start=1):
            # f.write –∑–∞–ø–∏—Å—É—î —Ç–µ–∫—Å—Ç —É —Ñ–∞–π–ª (–¥–æ–¥–∞—î–º–æ \n ‚Äî –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫)
            f.write(f'{i}. {item["name"]} - {item["quantity"]} x {item["price"]}‚Ç¨\n')
    
    # –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
    print("‚úÖ Shopping list saved to text.txt")  


# üìÇ –§–£–ù–ö–¶–Ü–Ø: –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Å–ø–∏—Å–æ–∫ –∑ —Ñ–∞–π–ª—É text.txt
def load_from_file():
    shopping_list = []  # —Å—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫, —É —è–∫–∏–π –¥–æ–¥–∞–≤–∞—Ç–∏–º–µ–º–æ —Ç–æ–≤–∞—Ä–∏
    
    try:
        # –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Ñ–∞–π–ª —É —Ä–µ–∂–∏–º—ñ —á–∏—Ç–∞–Ω–Ω—è ("r")
        with open("text.txt", "w", encoding="utf-8") as f:
            # —á–∏—Ç–∞—î–º–æ —Ñ–∞–π–ª —Ä—è–¥–æ–∫ –∑–∞ —Ä—è–¥–∫–æ–º
            for line in f:
                # –ø—Ä–∏–∫–ª–∞–¥ —Ä—è–¥–∫–∞ —É —Ñ–∞–π–ª—ñ:
                # "1. –•–ª—ñ–± - 2 x 25.0‚Ç¨"
                
                # strip() –ø—Ä–∏–±–∏—Ä–∞—î –∑–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏ —ñ —Å–∏–º–≤–æ–ª–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—è —Ä—è–¥–∫–∞
                # split() —Ä–æ–∑–¥—ñ–ª—è—î —Ä—è–¥–æ–∫ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏ –∑–∞ –ø—Ä–æ–±—ñ–ª–∞–º–∏
                parts = line.strip().split()
                
                # –ø—ñ—Å–ª—è split() parts –±—É–¥–µ —Ç–∞–∫–∏–º: ['1.', '–•–ª—ñ–±', '-', '2', 'x', '25.0‚Ç¨']
                name = parts[1]               # –Ω–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É ‚Äî 2-–π –µ–ª–µ–º–µ–Ω—Ç
                quantity = int(parts[3])      # –∫—ñ–ª—å–∫—ñ—Å—Ç—å ‚Äî 4-–π –µ–ª–µ–º–µ–Ω—Ç
                price = float(parts[5][:-1])  # —Ü—ñ–Ω–∞ ‚Äî 6-–π –µ–ª–µ–º–µ–Ω—Ç, –∞–ª–µ –±–µ–∑ "‚Ç¨"
                
                # —Å—Ç–≤–æ—Ä—é—î–º–æ —Å–ª–æ–≤–Ω–∏–∫ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É
                item = {
                    "name": name,
                    "quantity": quantity,
                    "price": price
                }
                
                # –¥–æ–¥–∞—î–º–æ —Å–ª–æ–≤–Ω–∏–∫ –¥–æ —Å–ø–∏—Å–∫—É
                shopping_list.append(item)
        
        # —è–∫—â–æ –≤—Å–µ –≤–¥–∞–ª–æ ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
        print("‚úÖ Shopping list loaded from text.txt")
    
    except FileNotFoundError:
        # —è–∫—â–æ —Ñ–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —â–µ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–ª–∏ –∂–æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É)
        print("‚ùå File not found! Create a new list instead.")
    
    # –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –≥–æ—Ç–æ–≤–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
    return shopping_list  



# üèÅ –ì–û–õ–û–í–ù–ê –§–£–ù–ö–¶–Ü–Ø –ü–†–û–ì–†–ê–ú–ò
def main():
    print("üõí –í—ñ—Ç–∞—é —É –º–µ–Ω–µ–¥–∂–µ—Ä—ñ –ø–æ–∫—É–ø–æ–∫!")
    
    # —Å—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫ ‚Äî —Å—é–¥–∏ –±—É–¥–µ–º–æ –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏
    shopping_list = []
    
    # –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Ü–∏–∫–ª ‚Äî –ø—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–∞—Ü—é—î, –¥–æ–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –≤–∏–±–µ—Ä–µ "6"
    while True:
        # –º–µ–Ω—é –∑ –≤–∏–±–æ—Ä–æ–º –¥—ñ—ó
        print('''
–ú–µ–Ω—é:
1. –î–æ–¥–∞—Ç–∏ –ø–æ–∫—É–ø–∫—É
2. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫
3. –ü–æ—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É
4. –ó–±–µ—Ä–µ–≥—Ç–∏ —É —Ñ–∞–π–ª
5. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ —Ñ–∞–π–ª—É
6. –í–∏—Ö—ñ–¥
            ''')
        try:
            # –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –Ω–æ–º–µ—Ä –ø—É–Ω–∫—Ç—É –º–µ–Ω—é (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: 1)
            choice = int(input("–í–∞—à –≤–∏–±—ñ—Ä: "))

            # –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è match-case (—è–∫ switch –≤ —ñ–Ω—à–∏—Ö –º–æ–≤–∞—Ö)
            match choice:
                case 1:
                    # –¥–æ–¥–∞—î–º–æ –ø–æ–∫—É–ø–∫—É
                    try:
                        add_item(shopping_list)
                    except Exception as e:
                        # —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ –Ω–µ —á–∏—Å–ª–æ –∞–±–æ —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫
                        print(f"Error: {e}")
                
                case 2:
                    # –ø–æ–∫–∞–∑—É—î–º–æ –≤—Å—ñ –ø–æ–∫—É–ø–∫–∏
                    show_list(shopping_list)
                
                case 3:
                    # –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î–º–æ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É
                    count_total(shopping_list)
                
                case 4:
                    # –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —Å–ø–∏—Å–æ–∫ —É —Ñ–∞–π–ª
                    save_to_file(shopping_list)
                
                case 5:
                    # –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Å–ø–∏—Å–æ–∫ —ñ–∑ —Ñ–∞–π–ª—É (–æ–Ω–æ–≤–ª—é—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫)
                    shopping_list = load_from_file()
                
                case 6:
                    # –≤–∏—Ö—ñ–¥ —ñ–∑ –ø—Ä–æ–≥—Ä–∞–º–∏
                    print("üëã See you!!")
                    break  # –≤–∏—Ö–æ–¥–∏–º–æ –∑ —Ü–∏–∫–ª—É while
                
                case _:
                    # —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ —á–∏—Å–ª–æ –Ω–µ –≤—ñ–¥ 1 –¥–æ 6
                    print("Error! Enter number 1-6!")
                    
        except ValueError:
            # —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤—ñ–≤ –Ω–µ —á–∏—Å–ª–æ, –∞ —Ç–µ–∫—Å—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: 'q')
            print("Enter number 1-6!!")


# üß† –¶–µ–π —Ä—è–¥–æ–∫ –æ–∑–Ω–∞—á–∞—î:
# "–ó–∞–ø—É—Å–∫–∞–π —Ñ—É–Ω–∫—Ü—ñ—é main() –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É,
#  –∞ –Ω–µ —ñ–º–ø–æ—Ä—Ç—É—î—Ç—å—Å—è —É –≤–∏–≥–ª—è–¥—ñ –º–æ–¥—É–ª—è"
if __name__ == "__main__":            
    main()